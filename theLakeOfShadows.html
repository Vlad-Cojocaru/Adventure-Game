<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Facing Your Destiny... The Game">
	<meta name="designer" content="Vlad Cojocaru">
	<meta name="keywords" content="html, html5, css, css3, web, design, javascript, programming, videogame, browser game, Destiny, Destiny 2, Oryx, The Taken King">
  
  <title>The Lake of Shadows</title>

  <link rel="stylesheet" href="css/main.css" />

<style>
  body {
    background: url("images/background8.png") center center fixed;
    background-size: cover;
  }
  </style>


</head>

<body>

  <div class="container" id="musicContainer">
  <h2>Music Controls</h2>
    <audio controls style='width: 180px; height: 30px;'>
      <source src="music/soundtrack.mp3" type="audio/mpeg">
    </audio>
  </div>

  <div class="container" id="infoContainer2">

  <h1>Stats</h1>
  <h2>Class: <h4 id="statsClass"></h4></h2>
  <h2>Health Points: <h4 id="statsHp"></h4></h2>
  <h2>Aptitude Points: <h4 id="statsAp"></h4></h2>
  <h2>Items: </h2>

  <div id="shopTable">

  <table>
    <tr>
      <td id="slot1"><br>Missing<br><br><br></td>
    </tr>
    <tr>
      <td id="slot2"><br>Missing<br><br><br></td>
    </tr>
    <tr>
      <td id="slot3"><br>Missing<br><br><br></td>
    </tr>
  </table>

  </div>

  </div>

  <div class="container" id="container7">

  <p id="story"></p>
  <div id="game"></div>
  <div id="gameText"></div>
  <div id="noButton">
  </div>


</body>

<script>

  var reward = "images/ascendantShard.png";
  var txtNumber = 0;

  aptitude = sessionStorage.getItem('aptitude');

  window.onload = function () {
    rewriteTxt();
    checkReturn();
    loadStats();
  }

  function checkReturn() {
  var itemValue = sessionStorage.getItem('item3')
  if (itemValue == "true") {
    document.getElementById('story').innerHTML = "It seems you've already acquired the item gifted for the completion of this quest.";
      document.getElementById('noButton').innerHTML = "<button onClick='back()' name='Return'><div id='backward'>Return</div></button> <button onClick='next()' name='Next'><div id='forward'>Bypass</div></button>"
    document.getElementById('infoContainer2').style.display = "none";
  }
}

  function loadStats() {

  upgradeModule = sessionStorage.getItem('item1');
  enhancementCore = sessionStorage.getItem('item2');
  ascendantShard = sessionStorage.getItem('item3');
  swordItem = sessionStorage.getItem('swordItem');
  shieldItem = sessionStorage.getItem('shieldItem');
  armorItem = sessionStorage.getItem('armorItem');
  armor = sessionStorage.getItem('armor');
  className = sessionStorage.getItem('className');
  health = sessionStorage.getItem('health');

  if (swordItem == "true") {
    document.getElementById('slot1').innerHTML = "<img src='images/sword.jpg' height='125' alt='ascendant shard'>";
  } else if (upgradeModule == "true") {
      document.getElementById('slot1').innerHTML = "<img src='images/upgradeModule.png' height='125' alt='upgrade module'>";
  } else {
      document.getElementById('slot1').innerHTML = "<br>Missing<br><br><br>";
  }

  if (shieldItem == "true") {
    document.getElementById('slot2').innerHTML = "<img src='images/shield.jpg' height='125' alt='ascendant shard'>";
  } else if (enhancementCore == "true") {
    document.getElementById('slot2').innerHTML = "<img src='images/enhancementCore.jpg' height='125' alt='enhancement core'>";
  } else {
    document.getElementById('slot2').innerHTML = "<br>Missing<br><br><br>";
  }

  if (armorItem == "true") {
    document.getElementById('slot3').innerHTML = "<img src='" + armor + "' height='125' alt='armor'>";
  } else if (ascendantShard == "true") {
      document.getElementById('slot3').innerHTML = "<img src='images/ascendantShard.png' height='125' alt='ascendant shard'>";

  } else {
      document.getElementById('slot3').innerHTML = "<br>Missing<br><br><br>";
  }


  document.getElementById('statsClass').innerHTML = className;
  document.getElementById('statsHp').innerHTML = health;
  document.getElementById('statsAp').innerHTML = aptitude;

  }

  function loadImageMap() {

    if (aptitude == "7") {
      return "<img src='images/imageMap.jpg' id='imgMap' usemap='#trostland'>"+
      "<map name='trostland'>"+
        "<area shape='rect' id='area1' class='areaCheat' coords='56,11,99,46' alt='first area' tabindex='0' onClick='loadAreaInfoTitan(this.id)'>"+
        "<area shape='rect' id='area2' class='areaCheat' coords='553,31,578,75' alt='second area' tabindex='0' onClick='loadAreaInfoTitan(this.id)'>"+
        "<area shape='rect' id='area3' class='areaCheat'coords='503,233,544,267' alt='third area' tabindex='0' onClick='loadAreaInfoTitan(this.id)'>"+
        "<area shape='rect' id='area4' class='areaCheat' coords='130,314,162,371' alt='fourth area' tabindex='0' onClick='loadAreaInfoTitan(this.id)'>"+
        "<area shape='rect' id='area5' class='areaCheat' coords='812,403,853,453' alt='fifth area' tabindex='0' onClick='loadAreaInfoTitan(this.id)'>"+
      "</map>";
    } else if (aptitude == "10") {
      return "<img src='images/imageMap.jpg' id='imgMap' usemap='#trostland'>"+
      "<map name='trostland'>"+
      "<area shape='rect' id='area1' class='areaCheat' coords='56,11,99,46' alt='first area' tabindex='0' onClick='loadAreaInfoWarlock(this.id)'>"+
      "<area shape='rect' id='area2' class='areaCheat' coords='553,31,578,75' alt='second area' tabindex='0' onClick='loadAreaInfoWarlock(this.id)'>"+
      "<area shape='rect' id='area3' class='areaCheat'coords='503,233,544,267' alt='third area' tabindex='0' onClick='loadAreaInfoWarlock(this.id)'>"+
      "<area shape='rect' id='area4' class='areaCheat' coords='812,403,853,453' alt='fourth area' tabindex='0' onClick='loadAreaInfoWarlock(this.id)'>"+
      "</map>";
    } else if (aptitude == "12") {
      return "<img src='images/imageMap.jpg' id='imgMap' usemap='#trostland'>"+
      "<map name='trostland'>"+
      "<area shape='rect' id='area1' class='areaCheat' coords='56,11,99,46' alt='first area' tabindex='0' onClick='loadAreaInfoHunter(this.id)'>"+
      "<area shape='rect' id='area2' class='areaCheat' coords='553,31,578,75' alt='second area' tabindex='0' onClick='loadAreaInfoHunter(this.id)'>"+
      "<area shape='rect' id='area3' class='areaCheat'coords='503,233,544,267' alt='third area' tabindex='0' onClick='loadAreaInfoHunter(this.id)'>"+
    "</map>";
    }
}


  function loadAreaInfoTitan(callerId) {
    if (callerId == "area1") {
      txtNumber = 2;
      rewriteTxt();
    } else if (callerId == "area2") {
        document.getElementById('gameText').innerHTML = "You search the antenna and find nothing. Keep looking.";
    } else if (callerId == "area3") {
        document.getElementById('gameText').innerHTML = "You search the Well of Darkness and find nothing. Keep looking.";
    } else if (callerId == "area4") {
        document.getElementById('gameText').innerHTML = "You search behind the containers and find nothing. Keep looking. Watch out for the Taken!";
    } else if (callerId == "area5") {
        document.getElementById('gameText').innerHTML = "You seach in the rusted old car and find nothing. Keep looking.";
    }
  }

  function loadAreaInfoWarlock(callerId) {
    if (callerId == "area1") {
      txtNumber = 2;
      rewriteTxt();
    } else if (callerId == "area2") {
        document.getElementById('gameText').innerHTML = "You search the antenna and find nothing. Keep looking.";
    } else if (callerId == "area3") {
        document.getElementById('gameText').innerHTML = "You search the Well of Darkness and find nothing. Keep looking.";
    } else if (callerId == "area4") {
        document.getElementById('gameText').innerHTML = "You seach in the rusted old car and find nothing. Keep looking.";
    }
  }

  function loadAreaInfoHunter(callerId) {
    if (callerId == "area1") {
      txtNumber = 2;
      rewriteTxt();
    } else if (callerId == "area2") {
        document.getElementById('gameText').innerHTML = "You search the antenna and find nothing. Keep looking.";
    } else if (callerId == "area3") {
        document.getElementById('gameText').innerHTML = "You search the Well of Darkness and find nothing. Keep looking.";
    }
  }

function back() {
  if (txtNumber == 3 || txtNumber == 0) {
    location = "quests.html";
  } else {
    txtNumber--;
    rewriteTxt();
  }
  return false;
}

function rewriteTxt() {

  if (txtNumber == 0) {
      document.getElementById('story').innerHTML = "Where now entering the European Dead Zone, or the EDZ Guardian. To find what we're looking for, we need to search the town of Trostland, right there over that hill. I'll wait by the ship Guardian, don't stop searching until you find what we seek. Good Luck! ";
      document.getElementById('game').innerHTML = "<pre>";
      document.getElementById('gameText').innerHTML = "<pre>";
      document.getElementById('noButton').innerHTML = "<button onClick='back()' Name='Return'>Return</button> <button onClick='next()' name='Next'>Next</button>";
  } else if (txtNumber == 1) {
      document.getElementById('story').innerHTML = "*Search the town by hovering over areas until you find the what you seek. As a bit of a cheat, click on the image and press tab to tab through the areas.";
      document.getElementById('noButton').innerHTML = "<button onClick='back()' name='Back'>Prev</button>";
      document.getElementById('game').innerHTML = loadImageMap();

      //alert("The shard is located in the first highlighted area when you tab through");

  } else if (txtNumber == 2) {
      document.getElementById('story').innerHTML = "<pre>"
      document.getElementById('game').innerHTML = "<pre>"
      document.getElementById('gameText').innerHTML = "You found the Ascendant Shard! Snatch it and leave before the Taken find you!<br><img src='" + reward + "' id='centerItem2' height='125' alt='upgrade module'>";
      document.getElementById('container7').style.width = "600px";
      document.getElementById('noButton').innerHTML = "<button onClick='next()' name='Next'>Snatch</button>";
    } else if (txtNumber == 3) {
        document.getElementById('slot3').innerHTML = "<img src='" + reward + "' height='125' alt='upgrade module'>";
        document.getElementById('gameText').innerHTML = "You found the Ascendant Shard! Snatch it and leave before the Taken find you!";
        document.getElementById('noButton').innerHTML = "<button onClick='back()' name='Back'>Back to Quests</button>";

        sessionStorage.setItem('item3', true);
    }
}

function next() {
  txtNumber++;
  rewriteTxt();
}


</script>

</html>
